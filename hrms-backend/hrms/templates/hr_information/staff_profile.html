{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>KATH HRM - {{ staff.first_name }} {{ staff.surname }}</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

	<style>
		:root {
			--kath-red: #C8102E;
			--kath-dark-red: #A00D24;
		}

		body {
			background: linear-gradient(135deg, #f8f9fa, #e9ecef);
			min-height: 100vh;
		}

		.bg-kath-red { background-color: var(--kath-red) !important; }
		.text-kath-red { color: var(--kath-red) !important; }

		.profile-header {
			background: white;
			border-bottom: 3px solid var(--kath-red);
			padding: 2rem;
			border-radius: 0.5rem;
			box-shadow: 0 5px 15px rgba(0,0,0,0.08);
			margin-bottom: 2rem;
		}

		.profile-name {
			font-size: 1.8rem;
			font-weight: 700;
			color: #212529;
		}

		.profile-meta {
			color: #6c757d;
			font-size: 0.95rem;
		}

		.info-card {
			border: none;
			box-shadow: 0 10px 25px rgba(0,0,0,0.08);
			margin-bottom: 1.5rem;
		}

		.card-title-section {
			background-color: #f8f9fa;
			padding: 1rem;
			border-bottom: 2px solid #e9ecef;
			border-radius: 0.5rem 0.5rem 0 0;
			display: flex;
			align-items: center;
			gap: 0.75rem;
		}

		.card-title-icon {
			font-size: 1.25rem;
			color: var(--kath-red);
		}

		.card-title-text {
			font-weight: 700;
			color: #212529;
			font-size: 1.1rem;
			margin: 0;
		}

		.section-label {
			font-size: 0.75rem;
			letter-spacing: 0.04em;
			text-transform: uppercase;
			color: #6c757d;
			font-weight: 700;
			margin-bottom: 1rem;
		}

		.field-label {
			font-weight: 600;
			color: #495057;
			font-size: 0.95rem;
		}

		.field-value {
			color: #212529;
			font-size: 0.95rem;
		}

		.field-row {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0.75rem 0;
			border-bottom: 1px solid #f0f0f0;
		}

		.field-row:last-child {
			border-bottom: none;
		}

		.field-row.two-col {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 1rem;
		}

		.status-badge {
			display: inline-block;
			padding: 0.4rem 0.75rem;
			border-radius: 0.25rem;
			font-size: 0.85rem;
			font-weight: 600;
		}

		.status-active {
			background-color: #d4edda;
			color: #155724;
		}

		.status-leave {
			background-color: #fff3cd;
			color: #856404;
		}

		.status-retired {
			background-color: #e2e3e5;
			color: #383d41;
		}

		.badge-category {
			padding: 0.35rem 0.75rem;
			font-weight: 500;
			font-size: 0.85rem;
			border-radius: 0.25rem;
		}

		.category-clinical {
			background-color: rgba(220, 53, 69, 0.1);
			color: #dc3545;
		}

		.category-admin {
			background-color: rgba(40, 167, 69, 0.1);
			color: #28a745;
		}

		.category-support {
			background-color: rgba(255, 193, 7, 0.1);
			color: #ffc107;
		}

		.history-item {
			display: flex;
			justify-content: space-between;
			align-items: flex-start;
			padding: 0.75rem 0;
			border-bottom: 1px solid #f0f0f0;
		}

		.history-item:last-child {
			border-bottom: none;
		}

		.history-date {
			font-size: 0.85rem;
			color: #6c757d;
			min-width: 100px;
		}

		.history-details {
			flex: 1;
		}

		.history-title {
			font-weight: 600;
			color: #212529;
			margin-bottom: 0.25rem;
		}

		.history-subtitle {
			font-size: 0.85rem;
			color: #6c757d;
		}

		.compliance-valid {
			color: #155724;
			background-color: #d4edda;
			padding: 0.5rem 0.75rem;
			border-radius: 0.25rem;
			font-size: 0.85rem;
			font-weight: 600;
		}

		.compliance-expired {
			color: #721c24;
			background-color: #f8d7da;
			padding: 0.5rem 0.75rem;
			border-radius: 0.25rem;
			font-size: 0.85rem;
			font-weight: 600;
		}

		.header-section {
			display: flex;
			justify-content: space-between;
			align-items: flex-start;
			margin-bottom: 1.5rem;
		}

		.action-buttons {
			display: flex;
			gap: 0.5rem;
		}

		@media (max-width: 768px) {
			.profile-header {
				text-align: center;
			}

			.header-section {
				flex-direction: column;
				gap: 1rem;
			}

			.action-buttons {
				width: 100%;
				flex-direction: column;
			}

			.field-row.two-col {
				grid-template-columns: 1fr;
			}
		}
	</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg bg-kath-red shadow-sm sticky-top">
	<div class="container-fluid px-4">
		<a class="navbar-brand d-flex align-items-center gap-2 text-white" href="{% url 'dashboard' %}">
			<img src="{% static 'img/kath-logo.png' %}" alt="KATH Logo" style="height:32px; filter:brightness(0) invert(1);">
			<span class="fw-bold">KATH HRM</span>
		</a>

		<button class="navbar-toggler border-0" data-bs-toggle="collapse" data-bs-target="#navbarNav">
			<i class="fas fa-bars text-white"></i>
		</button>

		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav ms-auto align-items-lg-center gap-2">
				<li class="nav-item">
					<a class="nav-link text-white">
						<i class="fas fa-user me-1"></i> Staff Profile
					</a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle text-white" data-bs-toggle="dropdown">
						<span class="badge bg-white text-kath-red">Admin</span>
					</a>
					<ul class="dropdown-menu dropdown-menu-end">
						<li><a class="dropdown-item">Profile</a></li>
						<li><a class="dropdown-item">Settings</a></li>
						<li><hr class="dropdown-divider"></li>
						<li><a class="dropdown-item text-danger">Logout</a></li>
					</ul>
				</li>
			</ul>
		</div>
	</div>
</nav>

<!-- MAIN CONTENT -->
<div class="container-fluid p-4">
	<div class="container">

		<!-- HEADER SECTION -->
		<div class="header-section">
			<div>
				<a class="btn btn-outline-secondary btn-sm mb-3" href="{% url 'staff_list' %}"><i class="fas fa-arrow-left me-2"></i>Back to Records</a>
			</div>
			<div class="action-buttons">
				<a href="{% url 'print_record' staff_id=staff.id %}" class="btn btn-outline-primary btn-sm" target="_blank">
					<i class="fas fa-print me-1"></i>Print Record
				</a>
				<a href="#" class="btn btn-outline-secondary btn-sm">
					<i class="fas fa-download me-1"></i>Download
				</a>
			</div>
		</div>

		<!-- PROFILE HEADER -->
		<div class="profile-header">
			<div class="d-flex justify-content-between align-items-start">
				<div>
					<h1 class="profile-name">{{ staff.first_name }} {{ staff.surname }}</h1>
					<p class="profile-meta mb-2">
						<i class="fas fa-id-card me-1 text-kath-red"></i>
						<strong>{{ staff.kath_staff_number }}</strong>
						<span class="ms-3"><i class="fas fa-barcode me-1"></i>{{ staff.employee_id }}</span>
					</p>
					<div>
						<span class="badge-category category-clinical">{{ staff.category_of_profession }}</span>
						<span class="ms-2">{{ staff.profession }}</span>
					</div>
				</div>
				<div style="text-align: right;">
					<span class="status-badge status-active"><i class="fas fa-check-circle me-1"></i>{{ staff.work_status }}</span>
				</div>
			</div>
		</div>

		<!-- SECTION 1: IDENTITY & PERSONAL INFORMATION -->
		<div class="card info-card">
			<div class="card-title-section">
				<i class="fas fa-user card-title-icon"></i>
				<h5 class="card-title-text">Identity & Personal Information</h5>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-md-6">
						<div class="section-label">Biometric & Identification</div>
						<div class="field-row">
							<span class="field-label">Employee ID</span>
							<span class="field-value">{{ staff.employee_id }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Staff Number</span>
							<span class="field-value">{{ staff.kath_staff_number }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Ghana Card Number</span>
							<span class="field-value">{{ staff.ghana_card_number }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">SSNIT Number</span>
							<span class="field-value">{{ staff.ssnit_number }}</span>
						</div>
					</div>

					<div class="col-md-6">
						<div class="section-label">Personal Details</div>
						<div class="field-row">
							<span class="field-label">Surname</span>
							<span class="field-value">{{ staff.surname }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">First Name</span>
							<span class="field-value">{{ staff.first_name }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Other Name(s)</span>
							<span class="field-value">{{ staff.other_names|default:"N/A" }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Gender</span>
							<span class="field-value">{{ staff.sex }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Date of Birth</span>
							<span class="field-value">{{ staff.date_of_birth|date:"d M Y" }}</span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- SECTION 2: EMPLOYMENT & PLACEMENT -->
		<div class="card info-card">
			<div class="card-title-section">
				<i class="fas fa-briefcase card-title-icon"></i>
				<h5 class="card-title-text">Employment & Placement</h5>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-md-6">
						<div class="section-label">Role & Classification</div>
						<div class="field-row">
							<span class="field-label">Category</span>
							<span class="field-value">{{ staff.category_of_profession }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Profession</span>
							<span class="field-value">{{ staff.profession }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Employment Status</span>
							<span class="field-value">{{ staff.profession_status }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Work Status</span>
							<span class="field-value">{{ staff.work_status }}</span>
						</div>
					</div>

					<div class="col-md-6">
						<div class="section-label">Work Location & Assignment</div>
						<div class="field-row">
							<span class="field-label">Directorate</span>
							<span class="field-value">{{ staff.directorate }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Unit</span>
							<span class="field-value">{{ staff.unit }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Post of Duty</span>
							<span class="field-value">{{ staff.at_post_of_duty }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Payroll Status</span>
							<span class="field-value">{{ staff.payroll_status }}</span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- SECTION 3: APPOINTMENT, GRADE & BAND -->
		<div class="card info-card">
			<div class="card-title-section">
				<i class="fas fa-certificate card-title-icon"></i>
				<h5 class="card-title-text">Appointment, Grade & Band</h5>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-md-6">
						<div class="section-label">Grade & Classification</div>
						<div class="field-row">
							<span class="field-label">Grade on First Appointment</span>
							<span class="field-value">{{ staff.grade_on_first_appointment }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Current Grade</span>
							<span class="field-value">{{ staff.grade_on_current_appointment }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Year of Current Grade</span>
							<span class="field-value">{{ staff.year_of_current_grade }}</span>
						</div>
					</div>

					<div class="col-md-6">
						<div class="section-label">Appointment Timeline</div>
						<div class="field-row">
							<span class="field-label">Date of First Appointment</span>
							<span class="field-value">{{ staff.date_of_first_appointment|date:"d M Y" }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Date of Current Appointment</span>
							<span class="field-value">{{ staff.date_of_current_appointment|date:"d M Y" }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Years of Service</span>
							<span class="field-value">{{ staff.years_served }} years</span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- SECTION 4: COMPLIANCE & CREDENTIALS -->
		<!-- This section displays only for clinical staff -->
		{% if staff.category_of_profession == "Clinical" or staff.academic_qualification or staff.professional_qualification %}
		<div class="card info-card">
			<div class="card-title-section">
				<i class="fas fa-certificate card-title-icon"></i>
				<h5 class="card-title-text">Compliance & Professional Credentials</h5>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-md-6">
						<div class="section-label">Qualifications</div>
						<div class="field-row">
							<span class="field-label">Academic Qualification</span>
							<span class="field-value">{{ staff.academic_qualification }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Professional Qualification</span>
							<span class="field-value">{{ staff.professional_qualification }}</span>
						</div>
					</div>

					<div class="col-md-6">
						<div class="section-label">GOG/IGF Status</div>
						<div class="field-row">
							<span class="field-label">Funding Source</span>
							<span class="field-value">{{ staff.gog_igf_status }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Seniority Status</span>
							<span class="field-value">{{ staff.seniority_status }}</span>
						</div>
					</div>
				</div>
			</div>
		</div>
		{% endif %}

		<!-- SECTION 5: POSTING & MOVEMENT HISTORY -->
		<div class="card info-card">
			<div class="card-title-section">
				<i class="fas fa-history card-title-icon"></i>
				<h5 class="card-title-text">Posting & Movement History</h5>
			</div>
			<div class="card-body">
				<div class="section-label mb-3">Recent Movements (Last 5 years)</div>

				<!-- Sample History Item 1 -->
				<div class="history-item">
					<div class="history-date"><strong>2022-04-05</strong></div>
					<div class="history-details">
						<div class="history-title">Promotion to Grade 6</div>
						<div class="history-subtitle">Cardiology Department | Permanent Appointment</div>
					</div>
				</div>

				<!-- Sample History Item 2 -->
				<div class="history-item">
					<div class="history-date"><strong>2021-01-20</strong></div>
					<div class="history-details">
						<div class="history-title">Transfer to Cardiology</div>
						<div class="history-subtitle">From: Pediatrics | Grade 7 | Acting position</div>
					</div>
				</div>

				<!-- Sample History Item 3 -->
				<div class="history-item">
					<div class="history-date"><strong>2018-06-15</strong></div>
					<div class="history-details">
						<div class="history-title">Grade Increment</div>
						<div class="history-subtitle">Grade 7 â†’ Grade 7 (Annual progression)</div>
					</div>
				</div>

				<!-- Sample History Item 4 -->
				<div class="history-item">
					<div class="history-date"><strong>2016-08-12</strong></div>
					<div class="history-details">
						<div class="history-title">Initial Appointment</div>
						<div class="history-subtitle">Grade 8 | Pediatrics Department | Probation (2 years)</div>
					</div>
				</div>

				<!-- Future: Link to detailed history -->
				<div class="mt-3 pt-3 border-top">
					<a href="#" class="text-muted small"><i class="fas fa-external-link-alt me-1"></i>View detailed employment history</a>
				</div>
			</div>
		</div>

		<!-- SECTION 6: HR NOTES & REMARKS (HR-Only Section) -->
		<div class="card info-card">
			<div class="card-title-section">
				<i class="fas fa-lock card-title-icon" style="color: #dc3545;"></i>
				<h5 class="card-title-text">Bank & Payroll Details</h5>
			</div>
			<div class="card-body">
				<div class="row">
					<div class="col-md-6">
						<div class="section-label">Bank Information</div>
						<div class="field-row">
							<span class="field-label">Bank Name</span>
							<span class="field-value">{{ staff.bank_name }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Bank Branch</span>
							<span class="field-value">{{ staff.bank_branch }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Account Number</span>
							<span class="field-value">{{ staff.bank_account_number }}</span>
						</div>
					</div>

					<div class="col-md-6">
						<div class="section-label">Payroll Classification</div>
						<div class="field-row">
							<span class="field-label">Salary Grouping</span>
							<span class="field-value">{{ staff.sal_grouping }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Job Category</span>
							<span class="field-value">{{ staff.job_category }}</span>
						</div>
						<div class="field-row">
							<span class="field-label">Job Classification</span>
							<span class="field-value">{{ staff.job_classification }}</span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- FOOTER SECTION -->
		<div class="mt-4 text-center text-muted">
			<small>
				<i class="fas fa-info-circle me-1"></i>
				This is an official HR record. Employee record ID: {{ staff.id }}
			</small>
		</div>

	</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
